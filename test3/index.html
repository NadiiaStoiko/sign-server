<html>
	<head>
		<title>Підпис даних</title>
		<meta charset="utf-8" />
		<script src="JS/FileSaver.min.js"></script>
		<script>
			if (typeof window.Promise !== 'function')
				document.write('<script src="js/promise.min.js"><\/script>')
		</script>
		<script src="JS/euscp-1.3.63.js"></script>
		<script src="JS/main.js"></script>

		<style>
			@keyframes rotate {
				100% {
					transform: rotate(360deg);
				}
			}

			@keyframes dash {
				0% {
					stroke-dasharray: 1, 150;
					stroke-dashoffset: 0;
				}
				50% {
					stroke-dasharray: 90, 150;
					stroke-dashoffset: -35;
				}
				100% {
					stroke-dasharray: 90, 150;
					stroke-dashoffset: -124;
				}
			}

			.spinner {
				width: 24px;
				height: 24px;
			}

			.spinner .svg {
				animation: rotate 2s linear infinite;
				width: inherit;
				height: inherit;
			}

			.spinner .path {
				stroke: currentColor;
				stroke-linecap: round;
				animation: dash 1.5s ease-in-out infinite;
			}
		</style>
	</head>
	<body>
		<div class="iframe-wrapper" style="max-width: 500px">
			<div
				class="headers"
				style="display: flex; padding: 3px; flex-direction: column"
			>
				<h2>Створення електронного підпису</h2>
				<h3>
					Оберіть тип носія особистого ключа, особистий ключ, введіть пароль
					захисту ключа та натисніть "Зчитати"
				</h3>
			</div>

			<div>
				<p>Оберіть тип носія особистого ключа</p>
				<input type="radio" id="pkTypeFile" name="pkType" checked="" />
				<label for="pkTypeFile">Файловий носій</label>
				<input type="radio" id="pkTypeKeyMedia" name="pkType" />
				<label for="pkTypeKeyMedia">Захищений носій</label>
				<input type="radio" id="pkTypeKSP" name="pkType" />
				<label for="pkTypeKSP">Носій у складі сервісу</label>
			</div>
			<br />
			<br />
			<div id="pkFileBlock" style="display: flex; flex-direction: column">
				<label>Файл з особистим ключем:</label>
				<label
					for="pkFile"
					style="
						display: flex;
						width: 120px;
						padding: 5px 12px;
						cursor: pointer;
						background-color: #007bff;
						color: white;
						border-radius: 4px;
						font-family: sans-serif;
						margin: 10px;
					"
				>
					Оберіть файл
				</label>
				<input
					id="pkFile"
					type="file"
					style="margin-left: 15px; margin-bottom: 15px; display: none"
				/>
				<label for="pkFilePassword">Пароль:</label>
				<input
					id="pkFilePassword"
					type="password"
					value=""
					style="margin: 10px"
				/>
				<br />
				<!-- <p style="color: darkorange; font-size: 20px; max-width: 50%">
					Щоб накласти другий підпис, після успішного першого підпису, виберіть
					другий файл ЕЦП, вкажіть пароль і натисніть "Накласти підпис" не
					змінюючи текст для підпису та результат від попереднього підпису.
				</p> -->
				<!-- <p>
					Перевірка підписаних даних тут:
					<a href="https://czo.gov.ua/verify" target="_blank"
						>https://czo.gov.ua/verify</a
					>
				</p> -->
			</div>
			<div id="pkKeyMediaBlock" style="display: none">
				<label for="pkKeyMediaSelect">Носій ос. ключа:</label>
				<select id="pkKeyMediaSelect"></select>
				<br />
				<label>Пароль:</label>
				<br />
				<input id="pkKeyMediaPassword" type="password" />
			</div>
			<div id="pkKSPBlock" style="display: none">
				<label>Тип сервісу підпису:</label>
				<select id="pkKSPSelect"></select>
				<div id="pkKSPUserIdBlock">
					<br />
					<label>Ідентифікатор користувача:</label>
					<br />
					<input id="pkKSPUserId" />
				</div>
				<div id="pkKSPQRBlock" style="display: none">
					<br />
					<label id="pkKSPQRImageLabel"></label>
					<br />
					<div id="pkKSPQRImageBlock"></div>
				</div>
			</div>
			<br />
			<div id="signBlock" style="display: flex; flex-direction: column">
				<label for="dataFile">Оберіть файл для підпису:</label>
				<label
					for="dataFile"
					style="
						display: flex;
						width: 120px;
						padding: 5px 12px;
						cursor: pointer;
						background-color: #007bff;
						color: white;
						border-radius: 4px;
						font-family: sans-serif;
						margin: 10px;
					"
					>Оберіть файл</label
				>
				<input id="dataFile" type="file" style="display: none" />
				<label for="envelopedOrigin">
					Додавати оригінал у підписану сигнатуру:
					<input id="envelopedOrigin" type="checkbox" checked="" />
				</label>
				<br />

				<br /><br />
				<button id="sign-button">Накласти підпис</button>
				<!--   <button id='protect-button'>protect-button</button>-->
				<div id="spinner" class="spinner" style="display: none">
					<svg class="svg" viewBox="0 0 50 50">
						<circle
							class="path"
							cx="25"
							cy="25"
							r="20"
							fill="none"
							stroke-width="5"
						></circle>
					</svg>
				</div>

				<br /><br />
				<label>Підписані дані:</label>
				<br /><br />
				<textarea
					id="sign-textarea"
					style="width: 350px; height: 100px; overflow: scroll"
				></textarea>
				<br /><br />
				<label>Публічний сертифікат ключа:</label>
				<div
					id="pkDetails"
					style="
						min-height: 50px;
						overflow: auto;
						width: 100%;
						border: 1px solid;
					"
				></div>
				<br /><br />
			</div>
		</div>
	</body>
</html>
